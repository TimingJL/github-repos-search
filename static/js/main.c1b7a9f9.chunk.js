(this["webpackJsonpgithub-repos-search"]=this["webpackJsonpgithub-repos-search"]||[]).push([[0],{103:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(21),i=a.n(c),l=(a(95),a(65)),u=a(62),s=a(128),p=a(131),d=a(132),g=a(133),m=a(130),f=a(77),b=a.n(f),h=Object(s.a)((function(e){var t=e,a=t.custom.navigationBar;return{root:{height:t.navigationBar.height,background:a.backgroundColor,color:a.color,boxSizing:"border-box",display:"flex",justifyContent:"center"},container:function(e){return{display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.matches?"0 20px":"0 8px 0 20px",margin:"auto",boxSizing:"border-box",width:1280,maxWidth:1280}},logo:function(e){return{display:"block",height:28,padding:e.matches?"0 16px":0}},button:{color:a.color}}})),O=function(e){var t=e.isDarkMode,a=e.handleChangeTheme,n=Object(m.a)("(min-width: 768px)"),r=h({matches:n}),c=t?p.a:d.a;return o.a.createElement("div",{className:r.root},o.a.createElement("div",{className:r.container},o.a.createElement("img",{src:b.a,className:r.logo,alt:"dcard logo"}),o.a.createElement(g.a,{className:r.button,"aria-label":"theme change",onClick:a},o.a.createElement(c,null))))},v=function(e){var t=e.isDarkMode,a=e.handleChangeTheme;return o.a.createElement(O,{isDarkMode:t,handleChangeTheme:a})},j=a(149),E=a(134),y=a(142),x=a(78),C=a.n(x),S=Object(s.a)((function(e){return Object(j.a)({root:{padding:"2px 4px",display:"flex",alignItems:"center",width:912,borderRadius:4},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10}})})),P=function(e){var t=e.handleOnChange,a=S();return o.a.createElement(E.a,{component:"form",className:a.root},o.a.createElement(g.a,{disabled:!0,className:a.iconButton,"aria-label":"search"},o.a.createElement(C.a,null)),o.a.createElement(y.a,{className:a.input,placeholder:"Github repos search",inputProps:{"aria-label":"Github repos search"},onChange:t}))},L=Object(s.a)((function(){return{root:{height:100,display:"flex",alignItems:"center",justifyContent:"center",padding:"0 20px"}}})),_=function(e){var t=e.handleOnChange,a=L();return o.a.createElement("div",{className:a.root},o.a.createElement(P,{handleOnChange:t}))},w=a(145),N=a(7),k=a(147),R=a(81),I=a.n(R),$=a(80),M=a.n($),T=a(79),D=a.n(T),q=Object(N.a)((function(){return{root:{marginRight:2,padding:"0 4px"}}}))(k.a),B=Object(s.a)((function(){return{root:{display:"flex"},content:{padding:"0 12px"},fullName:{fontSize:16,fontWeight:600},description:{fontSize:14,lineHeight:"24px"},chips:{marginTop:4}}})),A=Object(r.memo)((function(e){var t=e.item,a=B(),n=t.owner;return o.a.createElement("div",{className:a.root},o.a.createElement(w.a,{alt:n.login,src:n.avatar_url}),o.a.createElement("div",{className:a.content},o.a.createElement("div",{className:a.fullName},t.full_name),o.a.createElement("div",{className:a.description},t.description),o.a.createElement("div",{className:a.chips},o.a.createElement(q,{variant:"outlined",size:"small",label:t.language,icon:o.a.createElement(D.a,null)}),o.a.createElement(q,{variant:"outlined",size:"small",label:t.stargazers_count,icon:o.a.createElement(M.a,null)}),o.a.createElement(q,{variant:"outlined",size:"small",label:t.watchers,icon:o.a.createElement(I.a,null)}))))})),z=a(135),H=a(143),F=a(136),G=Object(N.a)((function(){return{root:{padding:"0 20px 20px 20px"}}}))(z.a),W=Object(s.a)((function(e){var t=e.palette;return{root:{padding:"8px 0"},item:{padding:"16px 12px",borderBottom:"1px solid ".concat(t.divider)}}})),J=function(e){var t=e.repositories,a=W(),n=t.items;return o.a.createElement(G,{maxWidth:"md"},o.a.createElement(E.a,{elevation:0},n.map((function(e){return o.a.createElement(H.a,{button:!0,key:e.id,className:a.item},o.a.createElement(A,{item:e}),o.a.createElement(F.a,null))}))))},U="github-repos-search",X="".concat(U,"/FETCH_REPOSITORIES"),V="".concat(U,"/SET_REPOSITORIES"),Y="".concat(U,"/FETCH_REPOSITORIES_LOADING"),K="".concat(U,"/LOAD_REPOSITORIES"),Q="".concat(U,"/LOAD_REPOSITORIES_LOADING"),Z="".concat(U,"/UPDATE_REPOSITORIES_LOADING"),ee=function(e){var t=e.error,a=e.data;return{type:V,error:t,payload:{data:a}}},te=function(e){var t=e.error,a=e.data;return{type:Z,error:t,payload:{data:a}}},ae=a(137),ne=Object(s.a)((function(e){return{root:{display:"flex","& > * + *":{marginLeft:e.spacing(2)},alignItems:"center",justifyContent:"center",padding:"12px 0"}}})),re=function(e){var t=e.color,a=ne();return o.a.createElement("div",{className:a.root},o.a.createElement(ae.a,{style:{color:t}}))},oe=Object(N.a)((function(){return{root:{padding:"0 20px 20px 20px"}}}))(z.a),ce=Object(s.a)((function(e){var t=e.palette,a={normal:t.text.primary,error:t.error.main,warning:t.warning.main};return{root:function(e){return{padding:"20px 24px",color:a[e.type]||t.text.primary}}}})),ie=function(e){var t=e.type,a=void 0===t?"normal":t,n=e.message,r=ce({type:a});return o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(oe,null,o.a.createElement(E.a,{elevation:0},o.a.createElement("div",{className:r.root},n))))},le=Object(s.a)((function(e){var t=e.custom.mainContent;return{root:{background:t.backgroundColor,color:t.color,flex:"1 1 auto",overflowY:"auto"},bottomInfo:{height:100}}})),ue=Object(u.b)((function(e){var t=e.githubReposSearchReducer;return{repositories:t.repositories,fetchMeta:t.fetchMeta,loadMeta:t.loadMeta,page:t.page,perPage:t.perPage,isLastPage:t.isLastPage}}),(function(e){return{handleFetchRepositories:function(t){return e(function(e){var t=e.queryString,a=e.perPage;return{type:X,payload:{queryString:t,perPage:a}}}(t))},handleLoadRepositories:function(t){return e(function(e){var t=e.queryString,a=e.page,n=e.perPage;return{type:K,payload:{queryString:t,page:a,perPage:n}}}(t))}}}))((function(e){var t=e.repositories,a=e.fetchMeta,n=e.loadMeta,c=e.page,i=e.perPage,u=e.isLastPage,s=e.handleFetchRepositories,p=e.handleLoadRepositories,d=Object(r.useRef)(null),g=le(),m=Object(r.useState)(""),f=Object(l.a)(m,2),b=f[0],h=f[1],O=Object(r.useCallback)((function(e){var t=e.target.value;t.length>0&&(s({queryString:t,perPage:i}),h(t))}),[i]),v=Object(r.useCallback)((function(){var e=d.current;e&&(e.scrollTop+e.clientHeight>=e.scrollHeight&&!u&&p({queryString:b,page:c,perPage:i}))}),[d,c,i]);return o.a.createElement("div",{ref:d,className:g.root,onScroll:v},o.a.createElement(_,{handleOnChange:O}),o.a.createElement(ie,{type:"error",message:a.error}),a.isLoading&&o.a.createElement(re,{color:"#fff"}),a.isLoaded&&o.a.createElement(J,{repositories:t}),o.a.createElement("div",{className:g.bottomInfo},o.a.createElement(ie,{type:"error",message:n.error}),n.isLoading&&o.a.createElement(re,{color:"#fff"})))})),se=Object(s.a)((function(){return{root:{display:"flex",flexDirection:"column",height:"100vh"}}})),pe=function(e){var t=e.isDarkMode,a=e.handleChangeTheme,n=se();return o.a.createElement("div",{className:n.root},o.a.createElement(v,{isDarkMode:t,handleChangeTheme:a}),o.a.createElement(ue,null))},de=a(140),ge=a(27),me=a(83),fe={navigationBar:{height:48}},be={custom:{navigationBar:{backgroundColor:"#3b3b3b",color:"#fff"},mainContent:{backgroundColor:"#181818",color:"#fff"},border:{default:"1px solid #fff3"},boxShadow:{default:"0 1px 6px rgba(255,255,255,0.2)"}}},he={custom:{navigationBar:{backgroundColor:"#016AA6",color:"#fff"},mainContent:{backgroundColor:"#00324E",color:"#fff"},border:{default:"1px solid #01588A"},boxShadow:{default:"0 1px 6px rgba(32,33,36,.28)"}}},Oe=Object(me.a)(Object(ge.a)(Object(ge.a)(Object(ge.a)({},fe),be),{},{palette:{type:"dark"}})),ve=Object(me.a)(Object(ge.a)(Object(ge.a)(Object(ge.a)({},fe),he),{},{palette:{}})),je=a(141),Ee=a(25),ye=a(19),xe=a.n(ye),Ce=a(13),Se=function(e){var t;return xe()(e,(t={},Object(Ce.a)(t,"isLoading",{$set:!0}),Object(Ce.a)(t,"isLoaded",{$set:!1}),Object(Ce.a)(t,"error",{$set:null}),t))},Pe=function(e){var t;return xe()(e,(t={},Object(Ce.a)(t,"isLoading",{$set:!1}),Object(Ce.a)(t,"isLoaded",{$set:!0}),Object(Ce.a)(t,"error",{$set:null}),t))},Le=function(e,t){var a;return xe()(e,(a={},Object(Ce.a)(a,"isLoading",{$set:!1}),Object(Ce.a)(a,"isLoaded",{$set:!1}),Object(Ce.a)(a,"error",{$set:t.message}),a))},_e=(n={},Object(Ce.a)(n,"isLoading",!1),Object(Ce.a)(n,"isLoaded",!1),Object(Ce.a)(n,"error",null),n),we=function(e){return e.page*e.perPage>=e.totalCount},Ne={page:1,perPage:30,isLastPage:!1,repositories:{total_count:0,incomplete_results:!1,items:[]},fetchMeta:_e,loadMeta:_e},ke=Object(Ee.c)({githubReposSearchReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ne,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.error;switch(a){case Y:return xe()(e,{fetchMeta:{$apply:Se}});case V:return n?xe()(e,{fetchMeta:{$apply:function(e){return Le(e,n)}}}):xe()(e,{repositories:{$set:t.payload.data},fetchMeta:{$apply:Pe},isLastPage:{$apply:function(){var a=e.page,n=e.perPage,r=t.payload.data.total_count;return we({page:a,perPage:n,totalCount:r})}},page:{$apply:function(e){return e+1}}});case Q:return xe()(e,{loadMeta:{$apply:Se}});case Z:if(n)return xe()(e,{loadMeta:{$apply:function(e){return Le(e,n)}}});var r=e.repositories.items.map((function(e){return e.id})),o=t.payload.data.items.filter((function(e){return-1===r.indexOf(e.id)}));return xe()(e,{repositories:{incomplete_results:{$set:t.payload.data.incomplete_results},items:{$push:o}},isLastPage:{$apply:function(){var a=e.page,n=e.perPage,r=t.payload.data.total_count;return we({page:a,perPage:n,totalCount:r})}},page:{$apply:function(t){return e.isLastPage?t:t+1}},loadMeta:{$apply:Pe}});default:return e}}}),Re=a(84),Ie=a(146),$e=a(85),Me=a(59),Te=a(148),De=a(138),qe=a(82),Be=a(139),Ae=a(144),ze=a(63),He=a(58),Fe=function(e){var t=e.method,a=e.url,n=e.data,r=function(e,t,a){var n={method:e,headers:new Headers(t)};return"get"===e.toLowerCase()?n:{method:e,headers:new Headers(t),body:JSON.stringify(a)}}(t,new Headers({"Content-Type":"application/json"}),n);return Object(ze.a)(fetch(a,r).then((function(e){return e}))).pipe(Object(qe.a)((function(e){return Object(ze.a)(new Promise((function(t,a){e.json().then((function(a){t({status:e.status,res:a})}),(function(e){return a(e)}))})))})),Object(He.a)((function(e){return e.res})))},Ge="https://api.github.com/search/repositories",We=[function(e){return e.pipe(Object($e.a)(X),Object(Te.a)(1e3),Object(De.a)((function(e){var t=e.payload,a=t.queryString,n=t.perPage;return Fe({method:"get",url:"".concat(Ge,"?q=").concat(a,"&page=1&per_page=").concat(n)}).pipe(Object(qe.a)((function(e){return Object(Me.a)(ee({data:e}))})),Object(Be.a)((function(e){return Object(Me.a)(ee({error:e}))})),Object(Ae.a)({type:Y}))})))},function(e){return e.pipe(Object($e.a)(K),Object(De.a)((function(e){var t=e.payload,a=t.queryString,n=t.page,r=t.perPage;return Fe({method:"get",url:"".concat(Ge,"?q=").concat(a,"=").concat(n,"&per_page=").concat(r)}).pipe(Object(qe.a)((function(e){return Object(Me.a)(te({data:e}))})),Object(Be.a)((function(e){return Object(Me.a)(te({error:e}))})),Object(Ae.a)({type:Q}))})))}],Je=Ie.a.apply(void 0,Object(Re.a)(We)),Ue=Object(je.a)({});var Xe=function(){var e=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ee.d,t=[Ue],a=[Ee.a.apply(void 0,t)],n=Object(Ee.e)(ke,e.apply(void 0,a));return Ue.run(Je),n}(),Ve=function(){var e=[ve,Oe],t=Object(r.useState)(0),a=Object(l.a)(t,2),n=a[0],c=a[1],i=Object(r.useCallback)((function(){c((function(e){return(e+1)%2}))}),[]);return o.a.createElement(u.a,{store:Xe},o.a.createElement(de.a,{theme:e[n]},o.a.createElement(pe,{handleChangeTheme:i,isDarkMode:1===n})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){e.exports=a.p+"static/media/dcard_logo.2ef7b509.svg"},90:function(e,t,a){e.exports=a(103)},95:function(e,t,a){}},[[90,1,2]]]);
//# sourceMappingURL=main.c1b7a9f9.chunk.js.map